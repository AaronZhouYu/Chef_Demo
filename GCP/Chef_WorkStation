sudo apt update && sudo apt upgrade -y

sudo wget https://packages.chef.io/files/stable/chef-workstation/21.2.303/ubuntu/20.04/chef-workstation_21.2.303-1_amd64.deb
sudo chmod 755 chef-workstation_*
sudo dpkg -i chef-workstation_*

chef -v

#Add Ruby to $PATH in Bash Shell
echo 'eval "$(chef shell-init bash)"' >> ~/.bashrc

chef generate repo chef-repo
mkdir -p ~/chef-repo/.chef

#After grnerating the .pem files from Chef Infra Server for user and organization, using SCP to download the .pem files to the directory: ~/chef-repo/.chef
cd ~/chef-repo/.chef
scp -i ~/.ssh/id_rsa aaron_zhouyu@10.148.0.2:~/.chef/aaron.pem ./
scp -i ~/.ssh/id_rsa aaron_zhouyu@10.148.0.2:~/chef_demo.pem ./

#Run 'knife configure' to generate the config.rb file in ~/.chef/
knife configure
cd ~
cp ~/chef-repo/.chef/*.pem cd ~/.chef/.
knife ssl fetch
knife client list
knife ssl check
